<?xml version="1.0" encoding="utf-8" standalone="no" ?>
<vehicle type="combineCutterFruitPreparer" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="../../../../shared/xml/schema/vehicle.xsd">

    <MR>true</MR>
    <!-- hydrostatic transmission means we don't have the full engine power to the wheels. it depends on the hydraulics motors -->
    <mrTransmission isHydrostatic="true" minRpmWanted="1150" maxRpmWanted="1720" powerRatio="0.8" />
    <!-- threshingPowerFx below 1 means more efficient system than average = less power required -->
    <mrCombine unloadingPower="25" threshingIdlePower="25" threshingPowerFx="1.1" irlSpotTonPerHour="175" maxFieldThreshingSpeed="11" />

    <parentFile xmlFilename="$data/vehicles/agrifac/lightOptitraxx/lightOptitraxx.xml">
        <attributes>

            <set path="vehicle.combine#threshingScale" value="0.975"/>

            <set path="vehicle.powerConsumer#neededMaxPtoPower" value="0"/>

            <!-- about 20000kgs (empty, no fuel) => about 21000kgs with fuel, fluids and the driver, and some tools -->
            <set path="vehicle.base.components.component(0)#centerOfMass" value="0 1.25 -2.3"/> <!--main-->
            <set path="vehicle.base.components.component(0)#mass" value="14700"/>
            <set path="vehicle.base.components.component(1)#centerOfMass" value="0 -0.2 -0.3"/> <!-- header -->
            <set path="vehicle.base.components.component(1)#mass" value="2000"/>
            <set path="vehicle.base.components.component(2)#centerOfMass" value="0 0 -0.2"/> <!-- preparer -->
            <set path="vehicle.base.components.component(2)#mass" value="800"/>

            <!-- spring between header and chassis -->
            <set path="vehicle.base.components.joint(0)#rotLimitSpring" value="4000 8000 1000"/>
            <set path="vehicle.base.components.joint(0)#rotLimitDamping" value="60 100 60"/>
            <set path="vehicle.base.components.joint(0)#allowsJointRotLimitMovement" value="true"/>

            <!-- spring between header and preparer -->
            <set path="vehicle.base.components.joint(1)#rotLimitSpring" value="4000 6000 1000"/>
            <set path="vehicle.base.components.joint(1)#rotLimitDamping" value="30 40 30"/>
            <set path="vehicle.base.components.joint(1)#allowsJointRotLimitMovement" value="true"/>

            <!--wheels -->
            <set path="vehicle.wheels.wheelConfigurations.wheelConfiguration(0).wheels.wheel(0).physics#mrForcePointPositionX" value="0"/> <!-- we want the force point of the wheelshape to be applied at the middle between the 2 rear wheels -->

            <set path="vehicle.wheels.wheelConfigurations.wheelConfiguration(0).wheels.wheel(0).physics#spring" value="220"/> <!-- back wheels -->
            <set path="vehicle.wheels.wheelConfigurations.wheelConfiguration(0).wheels.wheel(1).physics#spring" value="32"/> <!-- header wheel 1-->
            <set path="vehicle.wheels.wheelConfigurations.wheelConfiguration(0).wheels.wheel(2).physics#spring" value="32"/> <!-- header wheel 2-->
            <set path="vehicle.wheels.wheelConfigurations.wheelConfiguration(0).wheels.wheel(3).physics#spring" value="10"/> <!-- preparer wheel 1 -->
            <set path="vehicle.wheels.wheelConfigurations.wheelConfiguration(0).wheels.wheel(4).physics#spring" value="10"/> <!-- preparer wheel 2 -->
            <set path="vehicle.wheels.wheelConfigurations.wheelConfiguration(0).wheels.wheel(5).physics#spring" value="170"/> <!-- front wheel 1-->
            <set path="vehicle.wheels.wheelConfigurations.wheelConfiguration(0).wheels.wheel(6).physics#spring" value="170"/> <!-- front wheel 2-->

            <set path="vehicle.wheels.wheelConfigurations.wheelConfiguration(0).wheels.wheel(0).physics#damper" value="25"/>
            <set path="vehicle.wheels.wheelConfigurations.wheelConfiguration(0).wheels.wheel(1).physics#damper" value="15"/>
            <set path="vehicle.wheels.wheelConfigurations.wheelConfiguration(0).wheels.wheel(2).physics#damper" value="15"/>
            <set path="vehicle.wheels.wheelConfigurations.wheelConfiguration(0).wheels.wheel(3).physics#damper" value="15"/>
            <set path="vehicle.wheels.wheelConfigurations.wheelConfiguration(0).wheels.wheel(4).physics#damper" value="15"/>
            <set path="vehicle.wheels.wheelConfigurations.wheelConfiguration(0).wheels.wheel(5).physics#damper" value="20"/>
            <set path="vehicle.wheels.wheelConfigurations.wheelConfiguration(0).wheels.wheel(6).physics#damper" value="20"/>

            <set path="vehicle.wheels.wheelConfigurations.wheelConfiguration(0).wheels.wheel(1).physics#mrFrictionScale" value="0.1"/>
            <set path="vehicle.wheels.wheelConfigurations.wheelConfiguration(0).wheels.wheel(2).physics#mrFrictionScale" value="0.1"/>
            <set path="vehicle.wheels.wheelConfigurations.wheelConfiguration(0).wheels.wheel(3).physics#mrFrictionScale" value="0.8"/>
            <set path="vehicle.wheels.wheelConfigurations.wheelConfiguration(0).wheels.wheel(4).physics#mrFrictionScale" value="0.8"/>

            <set path="vehicle.wheels.wheelConfigurations.wheelConfiguration(0).wheels.wheel(5).physics#xOffset" value="0.045"/> <!-- front wheel 1-->
            <set path="vehicle.wheels.wheelConfigurations.wheelConfiguration(0).wheels.wheel(6).physics#xOffset" value="0.045"/> <!-- front wheel 2-->
            <set path="vehicle.wheels.wheelConfigurations.wheelConfiguration(0).wheels.wheel(5).physics#yOffset" value="0.07"/> <!-- front wheel 1-->
            <set path="vehicle.wheels.wheelConfigurations.wheelConfiguration(0).wheels.wheel(6).physics#yOffset" value="0.07"/> <!-- front wheel 2-->

            <!-- more suitable front wheels -->
            <set path="vehicle.wheels.wheelConfigurations.wheelConfiguration(0).wheels.wheel(5)#filename" value="$data/shared/wheels/tires/michelin/megaXbib/800_70R32.xml"/> <!-- front wheel 1-->
            <set path="vehicle.wheels.wheelConfigurations.wheelConfiguration(0).wheels.wheel(6)#filename" value="$data/shared/wheels/tires/michelin/megaXbib/800_70R32.xml"/> <!-- front wheel 2-->


            <set path="vehicle.powerConsumer#ptoRpm" value="540"/>
            <set path="vehicle.powerConsumer#maxForce" value="9" />
            <set path="vehicle.powerConsumer#forceNode" value="lightOptitraxx_header_component2" />

            <set path="vehicle.dischargeable.dischargeNode(0)#emptySpeed" value="340"/> <!-- less than 1min to unload the full "tank" -->

            <set path="vehicle.attacherJoints.attacherJoint(0)#lowerRotLimit" value="25 80 50"/> <!-- trailer high -->


            <!-- the back wheels are motorized too ! -->
            <set path="vehicle.motorized.differentialConfigurations.differentialConfiguration(0).differentials.differential(0)#maxSpeedRatio" value="1.5" />
            <set path="vehicle.motorized.differentialConfigurations.differentialConfiguration(0).differentials.differential(1)#wheelIndex1" value="1" />
            <set path="vehicle.motorized.differentialConfigurations.differentialConfiguration(0).differentials.differential(1)#differentialIndex2" value="1" />
            <set path="vehicle.motorized.differentialConfigurations.differentialConfiguration(0).differentials.differential(1)#torqueRatio" value="0.3" /> <!-- more power to the front wheels -->
            <set path="vehicle.motorized.differentialConfigurations.differentialConfiguration(0).differentials.differential(1)#maxSpeedRatio" value="2" />


            <!-- Volvo Penta D13 TAD1363VE // 82L/h @1900rpm and 345KW-->
            <!-- DEF = about 5.5% of the fuel rate -->
            <set path="vehicle.motorized.consumerConfigurations.consumerConfiguration(0).consumer(0)#usage" value="82"/>
            <set path="vehicle.motorized.consumerConfigurations.consumerConfiguration(0).consumer(1)#usage" value="4.5"/>

            <remove path="vehicle.motorized.motorConfigurations.motorConfiguration(0).motor"/>

            <set path="vehicle.motorized.motorConfigurations.motorConfiguration(0).motor#torqueScale" value="1"/>
            <set path="vehicle.motorized.motorConfigurations.motorConfiguration(0).motor#minRpm" value="700"/>
            <set path="vehicle.motorized.motorConfigurations.motorConfiguration(0).motor#maxRpm" value="1900"/>
            <set path="vehicle.motorized.motorConfigurations.motorConfiguration(0).motor#mrGovernorRpmRange" value="150"/>
            <set path="vehicle.motorized.motorConfigurations.motorConfiguration(0).motor#maxForwardSpeed" value="27"/>
            <set path="vehicle.motorized.motorConfigurations.motorConfiguration(0).motor#maxBackwardSpeed" value="12.2"/>
            <set path="vehicle.motorized.motorConfigurations.motorConfiguration(0).motor#ptoMotorRpmRatio" value="2.13"/>
            <set path="vehicle.motorized.motorConfigurations.motorConfiguration(0).motor#brakeForce" value="8"/>

            <!-- harvester = greater engine inertia than tractors or other vehicles -->
            <set path="vehicle.motorized.motorConfigurations.motorConfiguration(0).motor#mrInertiaFx" value="1.25" />

            <set path="vehicle.motorized.motorConfigurations.motorConfiguration(0).transmission#minForwardGearRatio" value="19"/>
            <set path="vehicle.motorized.motorConfigurations.motorConfiguration(0).transmission#minBackwardGearRatio" value="46.5"/>

            <set path="vehicle.motorized.motorConfigurations.motorConfiguration(0).motor.torque(0)#rpm" value="600"/>
            <set path="vehicle.motorized.motorConfigurations.motorConfiguration(0).motor.torque(0)#torque" value="1.050"/>

            <set path="vehicle.motorized.motorConfigurations.motorConfiguration(0).motor.torque(1)#rpm" value="700"/>
            <set path="vehicle.motorized.motorConfigurations.motorConfiguration(0).motor.torque(1)#torque" value="1.250"/>

            <set path="vehicle.motorized.motorConfigurations.motorConfiguration(0).motor.torque(2)#rpm" value="800"/>
            <set path="vehicle.motorized.motorConfigurations.motorConfiguration(0).motor.torque(2)#torque" value="1.400"/>

            <set path="vehicle.motorized.motorConfigurations.motorConfiguration(0).motor.torque(3)#rpm" value="900"/>
            <set path="vehicle.motorized.motorConfigurations.motorConfiguration(0).motor.torque(3)#torque" value="1.666"/>

            <set path="vehicle.motorized.motorConfigurations.motorConfiguration(0).motor.torque(4)#rpm" value="1000"/>
            <set path="vehicle.motorized.motorConfigurations.motorConfiguration(0).motor.torque(4)#torque" value="2.360"/>

            <set path="vehicle.motorized.motorConfigurations.motorConfiguration(0).motor.torque(5)#rpm" value="1100"/>
            <set path="vehicle.motorized.motorConfigurations.motorConfiguration(0).motor.torque(5)#torque" value="2.370"/>

            <set path="vehicle.motorized.motorConfigurations.motorConfiguration(0).motor.torque(6)#rpm" value="1200"/>
            <set path="vehicle.motorized.motorConfigurations.motorConfiguration(0).motor.torque(6)#torque" value="2.380"/>

            <set path="vehicle.motorized.motorConfigurations.motorConfiguration(0).motor.torque(7)#rpm" value="1300"/>
            <set path="vehicle.motorized.motorConfigurations.motorConfiguration(0).motor.torque(7)#torque" value="2.370"/>

            <set path="vehicle.motorized.motorConfigurations.motorConfiguration(0).motor.torque(8)#rpm" value="1400"/>
            <set path="vehicle.motorized.motorConfigurations.motorConfiguration(0).motor.torque(8)#torque" value="2.345"/>

            <set path="vehicle.motorized.motorConfigurations.motorConfiguration(0).motor.torque(9)#rpm" value="1500"/>
            <set path="vehicle.motorized.motorConfigurations.motorConfiguration(0).motor.torque(9)#torque" value="2.190"/>

            <set path="vehicle.motorized.motorConfigurations.motorConfiguration(0).motor.torque(10)#rpm" value="1600"/>
            <set path="vehicle.motorized.motorConfigurations.motorConfiguration(0).motor.torque(10)#torque" value="2.055"/>

            <set path="vehicle.motorized.motorConfigurations.motorConfiguration(0).motor.torque(11)#rpm" value="1700"/>
            <set path="vehicle.motorized.motorConfigurations.motorConfiguration(0).motor.torque(11)#torque" value="1.936"/>

            <set path="vehicle.motorized.motorConfigurations.motorConfiguration(0).motor.torque(12)#rpm" value="1800"/>
            <set path="vehicle.motorized.motorConfigurations.motorConfiguration(0).motor.torque(12)#torque" value="1.830"/>

            <set path="vehicle.motorized.motorConfigurations.motorConfiguration(0).motor.torque(13)#rpm" value="1900"/>
            <set path="vehicle.motorized.motorConfigurations.motorConfiguration(0).motor.torque(13)#torque" value="1.735"/>

            <set path="vehicle.fillUnit.fillUnitConfigurations.fillUnitConfiguration(0).fillUnits.fillUnit(0)#mrCenterOfMass" value="0 2.4 -0.7"/> <!-- we are very kind here. IRL, this is quite higher = driver should be careful with a "tricycle" vehicle and high center of gravity -->

            <!-- slower lifting/lowering of the head -->
            <set path="vehicle.foldable.foldingConfigurations.foldingConfiguration(0).foldingParts.foldingPart(0)#speedScale" value="0.5"/>

        </attributes>
    </parentFile>

</vehicle>